# 과정 1 | 문제 4

### 모빌리티 3팀 은대영
<br>
<br>


## 수행 목표  
----
### 펌웨어의 정확한 개념
- #### 펌웨어
    - 펌웨어는 하드웨어를 제어하는 가장 기본적인 프로그램
    - 장치나 시스템의 동작을 제어하고 관리하는 역할
    - 하드웨어와 소프트웨어의 특성을 동시에 가지고 있는 중간 형태의 소프트웨어
    - 주로 디지털 장치의 작은 반도체 칩(ROM)이나 비휘발성 메모리(EEPROM)에 저장되어 있음
    - 하드웨어의 작동 방식이나 기능들을 관리하는 소프트웨어가 칩 안에 저장되어 있는 형태
    - 소프트웨어를 하드웨어로 구현했다
<br>

- #### 펌웨어의 하드웨어적 특성
    - 하드웨어 내부에 위치하여 사용자가 내용을 쉽게 바꿀 수 없음
    - 전원이 꺼진 후에도 저장 데이터의 내용이 지워지지 않음
    - 하드웨어보다는 교환하기 쉽지만, 소프트웨어보다는 어려움
<br>

- #### 펌웨어의 소프트웨어적 특성
    - 프로그램의 형태를 갖추고 있음
    - 읽고 실행하고 수정이 가능
    - 하드웨어의 구동과 제어를 담당
<br>

- #### 펌웨어의 역할
    - 하드웨어 제어: 하드웨어의 기본적인 동작을 제어하는 역할
    - 중간 매개체: 하드웨어와 상위 소프트웨어 사이의 상호 작용
    - 기본 기능 제공: 장치가 기본적인 작업을 수행할 수 있도록 필요한 명령어를 포함
----------

### 펌웨어와 RTOS의 차이
- #### 펌웨어의 특성
    - 하드웨어를 제어하는 마이크로 프로그램
    - ROM이나 플래시 메모리에 저장됨
    - HW 관점: 별도의 논리회로 X, SW 특성 가짐
    - SW 관점: 하드웨어를 직접 제어, HW 특성 가짐
    - 펌웨어 기반 프로그래밍
        - 주로 슈퍼루프 방식으로 구현
        - 모든 작업이 순차적 실행
        - main 함수에서 초기화 후 진행
        - 상대적으로 간단한 시스템에 적합
<br>

- #### RTOS의 특성
    - RTOS는 실시간 운영체제
    - 정해진 시간 내에 작업 처리를 보장하는 시스템
    - 펌웨어의 한 형태로 볼 수 있지만, 더 복잡한 기능과 구조를 가짐
    - RTOS 기반 프로그래밍
        - 작업의 우선순위 관리, CPU 시간 효율적 분배
        - 멀티태스킹 지원
        - 선점형 스케줄링 제공
        - 태스크 간 통신 및 동기화 메커니즘 제공
        - 시간 제약 조건을 명시적으로 관리
<br>

- #### 펌웨어와 RTOS 간의 가장 큰 차이점
    - RTOS는 커널을 통해 태스크를 선택하고 실행할 수 있어 반응이 즉각적
    - Task 3을 실행하기 위해 펌웨어는 Task 1, 2를 거쳐야 함(순차적)
    - RTOS는 커널에서 Task 3을 바로 실행시킬 수 있음
<br>

- #### RTOS의 정의
    - RTOS(Real-Time Operationg System)는 실시간 응용 프로그램을 위해 개발된 운영체제
    - 코드 실행을 시간에 따라 정확히 관리, 시스템 자원 관리, 응용 프로그램 개발을 위한 일관된 기반 제공 SW
<br>

- #### RTOS의 핵심 요소
    1. 스케줄러(Scheduler): 어떤 태스크를 실행할지 결정하는 알고리즘을 제공, 우선순위 기반 선점형 스케줄링: 중요한 작업이 먼저 처리되도록 보장
    <br>

    1. 오브젝트(Object): 태스크, 세마포어, 메세지 큐 등의 개발자가 실시간 임베디드 시스템용 응용 프로그램을 만들 때 사용하는 특별 구조체
    <br>
    
    1. 서비스(Service): 커널이 오브젝트를 대상으로 수행하는 동작으로, 타이머, 인터럽트 처리, 자원 관리 등이 포함됨
    <br>

    - RTOS는 실시간성에 따라 Hard 실시간 시스템과 Soft 실시간 시스템으로 구분됨
    - Hard System은 데드라인을 반드시 지켜야 하며, 데드라인이 지난 결과는 무의미
    - Soft System은 어느정도 융통성이 있어 데드라인을 약간 넘겨도 결과가 유효
    - 신뢰성, 예측성, 고성능, 간결성, 확장성과 같은 특성을 바탕으로 항공/우주, 국방, 의료기기, 자동차 등의 오차 없이 철저한 처리시간 준수가 필요한 분야에서 사용됨
----------

### 프로그램 간의 우선순위
#### 우선 순위가 필요한 이유
- #### 자원의 효율적 분배
    - CPU, 메모리 등의 제한된 자원 내 컴퓨팅 시스템
    - 중요한 작업에 더 많은 자원을 할당 -> 효율성 증가

- #### 시간 제약 준수
    - 특히 실시간 시스템에서는 특정 작업이 정해진 시간 내에 완료되어야 함
    - 우선 순위를 통해 시간에 민감한 작업이 먼저 처리되도록 보장
    - 
- #### 사용자 경험 향상
    - 사용자와 직접 상호작용하는 프로그램에 높은 우선순위 부여
    - 시스템 응답성 개선 및 사용자 경험 개선
    - 
- #### 장기적 가치 창출
    - 우선순위를 정하는 목적: 장기적 차이를 통해 중요한 작업에 시간을 쓰기 위함
<br>

### 우선순위 역전 현상
- 우선순위 역전 현상은 실시간 운영체제나 우선순위 기반 스케줄링을 사용하는 환경에서 발생하는 문제로, 높은 우선순위의 프로세스가 낮은 우선순위의 프로세스 때문에 실행이 지연되는 현상

    #### 발생 시나리오
    - 낮은 우선순위 작업(L)이 공유 자원에 접근하여 세마포어나 락을 획득
    - 높은 우선순위 작업(H)이 실행되어 동일한 공유 자원에 접근하려 하지만, 이미 L이 자원을 점유하고 있어 대기 상태가 됨
    - 중간 우선순위 작업(M)이 실행되어, 이 작업은 공유 자원과 무관하지만 L보다 우선 순위가 높기 때문에 CPU를 점유
    - 결과적으로 L은 CPU를 얻지 못해 자원을 해제할 수 없고, H는 자원을 기다리며 계속 대기하게 됨
    - 이로 인해 우선순위가 가장 높은 작업이 마치 우선순위가 가장 낮은 작업처럼 실행되는 역설적인 현상 발생
    
- #### 우선순위 역전 문제 해결 기법
    - 1. 우선순위 상속
        - 공유 자원을 점유하고 있는 낮은 우선순위 작업이 해당 자원을 기다리는 높은 우선순위 작업의 우선순위를 일시적으로 상속받습니다
        
    - 2. 우선순위 올림
        - 공유자원에 접근하는 순간 해당 작업의 우선순위를 시스템에서 가장 높은 수준으로 올림.
        - 자원 사용이 끝나면 원래 우선순위로 돌아감.
        - 모든 프로세스의 우선순위와 공유 자원에 대한 정보를 사전에 알고 있어야 하므로 구현이 복잡함.
<br>

### 스케줄러와 시스템 프로그램의 특성
#### 시스템 프로그램의 정의
- 시스템 프로그램은 운영체제와 같은 커널 및 핵심 라이브러리를 직접 사용하여 Low-Level에서 동작하는 소프트웨어임
- 컴퓨터 HW가 프로그래머 및 사용자와 상호 작용하여 컴퓨터 시스템에서 응용 프로그램 소프트웨어를 효과적으로 실행할 수 있는 컴퓨터 프로그램을 설계하고 작성하는 것을 포함
- 일반적인 시스템 프로그램에는 운영체제 및 펌웨어, 컴파일러, 어셈블러, I/O 루틴, 인터프리터, 스케줄러, 로더 및 링커와 같은 프로그래밍 도구 포함
<br>

#### 스케줄러의 특성
- 스케줄러는 어떤 프로세스에세 자원을 할당할지를 결정하는 운영체제 커널의 코드를 의미
- 스케줄링 작업이 작업을 완료 자원에 할당하는 방법으로, 작업은 스레드, 프로세스 또는 데이터 흐름과 같은 가상 계산 요소일 수 있고 이는 차례대로 프로세서, 네트워크 링크 또는 확장 카드와 같은 하드웨어 리소스에 예약됨
<br>

#### 일반 프로그램과의 차이 
- #### 동작 레벨의 차이
    - 시스템 프로그램은 하위 운영체제와 연관이 있고 운영체제의 동작과 운영을 이해해야 하는 Low-level에 동작함
    - 반면 일반 프로그램(GUI 애플리케이션)은 more high-level에서 실행되는 응용 소프트웨어임
<br>

- #### 자원 관리 권한
    - 스케줄러는 한정적인 메모리를 여러 프로세스가 효율적으로 사용할 수 있도록 다음 실행 시간에 실행할 수 있는 프로세스 중에 하나를 선택하는 역할
    - 일반 프로그램은 이러한 시스템 자원 할당 권한이 없음
<br>

- #### 실행 우선순위
    - 스케줄러는 모든 컴퓨터 리소스를 바쁘게 유지하고 여러 사용자가 시스템 리소스를 효과적으로 공유하거나 목표 서비스 품질을 달성할 수 있도록 구현됨. 스케줄링 개념은 단일 CPU로 컴퓨터 멀티태스킹을 가능하게 함
<br>

### 스케줄러의 용도
- #### 시스템 레벨 스케줄링
    - 운영체제에서 스케줄러는 역할과 목적에 따라 장기, 중기, 단기 스케일러로 구분됨
    - 단기 스케줄러: ready queue에 존재하는 프로세스 중 어떤 프로세스를 실행할지 결정하고 프로세스에게 CPU를 할당
    - 장기 스케줄러: 대용량 메모리에 저장되어 있는 프로세스 중 어떤 프로세스 메모리를 할당하여 ready queue로 보낼지 결정
    - 중기 스케줄러: 현 시스템에서 메모리에 너무 많은 프로그램이 동시에 올라가는 것을 조절하는 역할
<br>

#### 애플리케이션 레벨 스케줄링
- Spring Scheduler와 같은 애플리케이션 스케줄러는 정해진 시간에 작업을 실행하거나 주기적으로 반복 작업을 수행하는 역할
- 지정된 시간 간격이나 특정 시점에 자동으로 실행되어야 하는 작업을 쉽게 구성할 수 있고, 멀티스레딩과 비동기 실행을 지원하여 효율적인 백그라운드 작업 처리를 제공함

#### 클라우드 환경에서의 작업 스케줄링
- 작업 스케줄러는 클라우드 내에서 여러 개의 작업이 요청되었을 때 한정된 자원을 효율적으로 배분하여 사용자의 작업이 원활히 수행되도록 도와주는 역할을 함. Gang Scheduler, Bin-Packing Scheduler, FIFO Scheduler, Multi-Queue Scheduler 등 다양하고 효율적인 스케줄러 기술이 사용됨

#### 스케줄링 목표
- 스케줄러는 다음과 같은 목표를 달성하기 위해 사용됨
    - 처리량 최적화: 시간 단위당 완료된 총 작업량 증대
    - 대기 시간 최소화: 작업이 준비된 후 실행이 시작되는 첫 번째 지점까지의 시간 단축
    - 응답 시간 최소화: 시스템이 응답하여 사용자에게 첫 번째 출력을 전달할 때까지의 시간 단축
    - 공정성 극대화: 각 프로세스에 대해 동일한 CPU 시간 또는 각 프로세스의 우선순위 및 워크로드에 따라 적절한 시간 할당 